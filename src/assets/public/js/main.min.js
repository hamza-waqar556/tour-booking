(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e(r.key),r)}}function e(n){var e=function(n){if("object"!=t(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var i=e.call(n,"string");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==t(e)?e:e+""}const i=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.initEvents()},e=[{key:"initEvents",value:function(){var t=this;$("#flight-search-form").on("submit",(function(n){return t.handleSubmit(n)}))}},{key:"handleSubmit",value:function(t){t.preventDefault();var n={origin:$("#origin").val(),destination:$("#destination").val(),departure_date:$("#departure_date").val(),return_date:$("#return_date").val(),adults:$("#adults").val(),max_results:$("#max_results").val()};this.fetchFlights(n)}},{key:"fetchFlights",value:function(t){var n=this;$.ajax({url:AIOB.routes.search_flights,method:"POST",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",AIOB.nonce)},data:t,success:function(t){return n.handleSuccess(t)},error:function(t){return n.handleError(t)}})}},{key:"handleSuccess",value:function(t){if(t.error)$("#search-results").html("<p>Error: ".concat(t.error,"</p>"));else{var n="<ul>";t.forEach((function(t){n+="<li>".concat(t.origin," to ").concat(t.destination," - ").concat(t.price,"</li>")})),n+="</ul>",$("#search-results").html(n)}}},{key:"handleError",value:function(t){$("#search-results").html("<p>Something went wrong!</p>"),console.log(t)}}],e&&n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,a(i.key),i)}}function a(t){var n=function(t){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=r(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(n)?n:n+""}var s=function(){return t=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.$input=this.$container.find(".airline-search-input"),this.$results=this.$container.find(".airline-search-results"),this.init()},n=[{key:"init",value:function(){this.$results.hide(),this.bindEvents()}},{key:"bindEvents",value:function(){this.$input.on("keyup",this.onKeyUp.bind(this)),this.$results.on("click","li",this.onResultClick.bind(this)),$(document).on("click",this.onDocumentClick.bind(this))}},{key:"onKeyUp",value:function(){var t=this.$input.val().trim();if(t.length<2)return this.$results.hide(),void this.$input.css({"background-image":"none","padding-left":"8px"});this.$input.css({"background-image":"none","padding-left":"8px"}),this.loadAirlines(t)}},{key:"loadAirlines",value:function(t){var n=this;$.ajax({url:AIOB.plugin.ajax_url,method:"POST",dataType:"json",data:{action:"searchAirlines",q:t},success:function(t){var e="";t.success&&t.data.length?($.each(t.data,(function(t,n){e+='<li style="padding:8px; border-bottom:1px solid #eee; display:flex; align-items:center; cursor:pointer;">\n                                <img src="'.concat(n.logo,'" alt="').concat(n.code,'" style="width:30px; height:30px; margin-right:10px;" />\n                                <span>').concat(n.name," - ").concat(n.code,"</span>\n                              </li>")})),n.$results.html(e).show()):n.$results.html('<li style="padding:8px;">No results found</li>').show()},error:function(t,n,e){console.log("Error fetching airlines: "+e)}})}},{key:"onResultClick",value:function(t){var n=$(t.currentTarget),e=n.find("span").text(),i=n.find("img").attr("src");this.$input.val(e),this.$results.hide(),this.$input.css({"background-image":"url(".concat(i,")"),"background-repeat":"no-repeat","background-size":"30px 30px","background-position":"5px center","padding-left":"40px"})}},{key:"onDocumentClick",value:function(t){$(t.target).closest(this.$container).length||this.$results.hide()}}],n&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var n=function(t){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=c(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(n)?n:n+""}jQuery(document).ready((function(){$(".airline-search-container").each((function(){new s(this)}))}));var h=function(){return t=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.$inputWrapper=this.$container.find(".airport-search-input-wrapper"),this.$input=this.$container.find(".airport-search-input"),this.$codeBox=this.$container.find(".airport-code-box-input"),this.$results=this.$container.find(".airport-search-results"),this.init()},n=[{key:"init",value:function(){this.$results.hide(),this.bindEvents()}},{key:"bindEvents",value:function(){this.$input.on("keyup",this.onKeyUp.bind(this)),this.$results.on("click","li",this.onResultClick.bind(this)),$(document).on("click",this.onDocumentClick.bind(this))}},{key:"onKeyUp",value:function(){var t=this.$input.val().trim();t.length<2?this.$results.hide():this.loadAirports(t)}},{key:"loadAirports",value:function(t){var n=this;$.ajax({url:AIOB.plugin.ajax_url,method:"POST",dataType:"json",data:{action:"searchAirports",q:t},success:function(t){var e="";t.success&&t.data.length?($.each(t.data,(function(t,n){e+='\n                  <li data-code="'.concat(n.code,'" data-name="').concat(n.name,'">\n                    <div class="airport-code-box">\n                      <span>').concat(n.code,'</span>\n                    </div>\n                    <div class="airport-info">\n                      <div class="airport-location">\n                        ').concat(n.city).concat(n.state?", "+n.state:"").concat(n.country?", "+n.country:"",'\n                      </div>\n                      <div class="airport-name">').concat(n.name,"</div>\n                    </div>\n                  </li>\n                ")})),n.$results.html(e).show()):n.$results.html('<li style="padding:8px;">No results found</li>').show()},error:function(t,n,e){console.log("Error fetching airports: "+e)}})}},{key:"onResultClick",value:function(t){var n=$(t.currentTarget),e=n.data("code"),i=n.data("name");this.$input.val(i),this.$codeBox.html("<span>".concat(e,"</span>")),this.$results.hide()}},{key:"onDocumentClick",value:function(t){$(t.target).closest(this.$container).length||this.$results.hide()}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();jQuery(document).ready((function(){$(".airport-search-container").each((function(){new h(this)}))})),console.log("Public JS loaded"),jQuery(document).ready((function(){new i}))})();