(()=>{"use strict";function t(n){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(n)}function n(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,e(i.key),i)}}function e(n){var e=function(n){if("object"!=t(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var r=e.call(n,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==t(e)?e:e+""}var r=function(){return t=function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.initEvents()},e=[{key:"initEvents",value:function(){var t=this;$("#searchFlights").on("submit",(function(n){return t.handleSubmit(n)}))}},{key:"handleSubmit",value:function(t){t.preventDefault();var n=new FormData(t.target),e=Object.fromEntries(n.entries());this.fetchFlights(e)}},{key:"fetchFlights",value:function(t){var n=this;$.ajax({url:AIOB.routes.search_flights,method:"POST",beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",AIOB.nonce)},data:t,success:function(t){return n.handleSuccess(t)},error:function(t){return n.handleError(t)}})}},{key:"handleSuccess",value:function(t){if(t.success){var n="<ul>";t.forEach((function(t){n+="<li>".concat(t.origin," to ").concat(t.destination," - ").concat(t.price,"</li>")})),n+="</ul>",$("#search-results").html(n)}else $("#search-results").html("<p>Error: ".concat(t.error,"</p>"))}},{key:"handleError",value:function(t){$("#search-results").html("<p>Something went wrong!</p>"),console.log(t)}}],e&&n(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var n=function(t){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=i(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(n)?n:n+""}jQuery(document).ready((function(){new r}));var c=function(){return t=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.$input=this.$container.find(".airline-search-input"),this.$results=this.$container.find(".airline-search-results"),this.init()},n=[{key:"init",value:function(){this.$results.hide(),this.bindEvents()}},{key:"bindEvents",value:function(){this.$input.on("keyup",this.onKeyUp.bind(this)),this.$results.on("click","li",this.onResultClick.bind(this)),$(document).on("click",this.onDocumentClick.bind(this))}},{key:"onKeyUp",value:function(){var t=this.$input.val().trim();if(t.length<2)return this.$results.hide(),void this.$input.css({"background-image":"none","padding-left":"8px"});this.$input.css({"background-image":"none","padding-left":"8px"}),this.loadAirlines(t)}},{key:"loadAirlines",value:function(t){var n=this;$.ajax({url:AIOB.plugin.ajax_url,method:"POST",dataType:"json",data:{action:"searchAirlines",q:t},success:function(t){var e="";t.success&&t.data.length?($.each(t.data,(function(t,n){e+='<li style="padding:8px; border-bottom:1px solid #eee; display:flex; align-items:center; cursor:pointer;">\n                                <img src="'.concat(n.logo,'" alt="').concat(n.code,'" style="width:30px; height:30px; margin-right:10px;" />\n                                <span>').concat(n.name," - ").concat(n.code,"</span>\n                              </li>")})),n.$results.html(e).show()):n.$results.html('<li style="padding:8px;">No results found</li>').show()},error:function(t,n,e){console.log("Error fetching airlines: "+e)}})}},{key:"onResultClick",value:function(t){var n=$(t.currentTarget),e=n.find("span").text(),r=n.find("img").attr("src");this.$input.val(e),this.$results.hide(),this.$input.css({"background-image":"url(".concat(r,")"),"background-repeat":"no-repeat","background-size":"30px 30px","background-position":"5px center","padding-left":"40px"})}},{key:"onDocumentClick",value:function(t){$(t.target).closest(this.$container).length||this.$results.hide()}}],n&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var n=function(t){if("object"!=u(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=u(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(n)?n:n+""}jQuery(document).ready((function(){$(".airline-search-container").each((function(){new c(this)}))}));var f=function(){return t=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.$inputWrapper=this.$container.find(".airport-search-input-wrapper"),this.$input=this.$container.find(".airport-search-input"),this.$codeBox=this.$container.find(".airport-code-box-input"),this.$results=this.$container.find(".airport-search-results");var e=(this.$input.attr("name")||"city_code")+"_code";this.$hiddenCodeInput=this.$inputWrapper.find("input.airport-search-code"),this.$hiddenCodeInput.length||(this.$hiddenCodeInput=$('<input type="hidden" name="'.concat(e,'" class="airport-search-code" />')),this.$inputWrapper.append(this.$hiddenCodeInput)),this.init()},n=[{key:"init",value:function(){this.$results.hide(),this.bindEvents()}},{key:"bindEvents",value:function(){this.$input.on("keyup",this.onKeyUp.bind(this)),this.$results.on("click","li",this.onResultClick.bind(this)),$(document).on("click",this.onDocumentClick.bind(this))}},{key:"onKeyUp",value:function(){var t=this.$input.val().trim();t.length<2?this.$results.hide():this.loadAirports(t)}},{key:"loadAirports",value:function(t){var n=this;$.ajax({url:AIOB.plugin.ajax_url,method:"POST",dataType:"json",data:{action:"searchAirports",q:t},success:function(t){var e="";t.success&&t.data.length?($.each(t.data,(function(t,n){e+='\n              <li data-code="'.concat(n.code,'" data-name="').concat(n.name,'">\n                <div class="airport-code-box">\n                  <span>').concat(n.code,'</span>\n                </div>\n                <div class="airport-info">\n                  <div class="airport-location">\n                    ').concat(n.city,"\n                    ").concat(n.state?", "+n.state:"","\n                    ").concat(n.country?", "+n.country:"",'\n                  </div>\n                  <div class="airport-name">').concat(n.name,"</div>\n                </div>\n              </li>\n            ")})),n.$results.html(e).show()):n.$results.html('<li style="padding:8px;">No results found</li>').show()},error:function(t,n,e){console.log("Error fetching airports: "+e)}})}},{key:"onResultClick",value:function(t){var n=$(t.currentTarget),e=n.data("code"),r=n.data("name");this.$input.val(r),this.$codeBox.html("<span>".concat(e,"</span>")),this.$hiddenCodeInput.val(e),this.$results.hide()}},{key:"onDocumentClick",value:function(t){$(t.target).closest(this.$container).length||this.$results.hide()}}],n&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(t){var n=function(t){if("object"!=p(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=p(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(n)?n:n+""}jQuery(document).ready((function(){$(".airport-search-container").each((function(){new f(this)}))}));var y=function(){return t=function t(n){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.configs=n,this.datePickers={},this.init()},(n=[{key:"init",value:function(){var t=this;this.configs.forEach((function(n){var e=n.selector,r=n.linked,i=n.offset,o=void 0===i?0:i;t.datePickers[e]=$(e).datepicker({dateFormat:"yy-mm-dd",minDate:0,onSelect:function(t,n){if(r){var i=$(e).datepicker("getDate");if(i){i.setDate(i.getDate()+o),$(r).datepicker("option","minDate",i);var a=$(r).datepicker("getDate");a&&a<i&&$(r).datepicker("setDate",i)}}}})}))}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function b(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var n=function(t){if("object"!=v(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=v(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(n)?n:n+""}jQuery(document).ready((function(){new y([{selector:"#departure-date",linked:"#return-date",offset:1},{selector:"#return-date"}])}));var k=function(){return t=function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.min=e.min||0,this.max=e.max||12,this.types=["adults","children","infants"],this.init()},n=[{key:"init",value:function(){var t=this;this.$container.find(".travelers-summary").on("click",(function(n){n.stopPropagation(),t.$container.find(".travelers-dropdown").toggle()})),this.$container.find(".travelers-dropdown").on("click",(function(t){t.stopPropagation()})),this.$container.find(".increase").on("click",(function(n){n.preventDefault();var e=$(this).closest(".travelers-item"),r=t.getTypeFromItem(e),i=e.find(".count"),o=parseInt(i.text(),10);o<t.max&&("adults"===r?i.text(o+1):"children"!==r&&"infants"!==r||o+1<=parseInt(t.$container.find(".travelers-item.adults .count").text(),10)&&i.text(o+1)),t.updateAll()})),this.$container.find(".decrease").on("click",(function(n){n.preventDefault();var e=$(this).closest(".travelers-item").find(".count"),r=parseInt(e.text(),10);r>t.min&&e.text(r-1),t.updateAll()})),$(document).on("click",(function(){t.$container.find(".travelers-dropdown").hide()})),t.updateAll()}},{key:"getTypeFromItem",value:function(t){var n,e=function(t,n){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,n){if(t){if("string"==typeof t)return m(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){e&&(t=e);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return a=t.done,t},e:function(t){c=!0,o=t},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}(this.types);try{for(e.s();!(n=e.n()).done;){var r=n.value;if(t.hasClass(r))return r}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"updateAll",value:function(){var t=this,n=0;this.types.forEach((function(e){var r=t.$container.find(".travelers-item.".concat(e)),i=parseInt(r.find(".count").text(),10)||0;n+=i,r.find(".hidden-input").val(i)})),this.$container.find(".travelers-summary").val("Travelers: ".concat(n))}}],n&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function S(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var n=function(t){if("object"!=w(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var e=n.call(t,"string");if("object"!=w(e))return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(n)?n:n+""}$(document).ready((function(){new k(".travelers-counter")}));var x=function(){return t=function t(n,e){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.$container=$(n),this.$returnWrapper=$(e),this.init()},(n=[{key:"init",value:function(){var t=this;this.$container.find("#one-way").is(":checked")?this.$returnWrapper.hide():this.$returnWrapper.show(),this.$container.find("input[name='flights']").on("change",(function(){t.$container.find("#one-way").is(":checked")?t.$returnWrapper.hide():t.$returnWrapper.show()}))}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();$(document).ready((function(){new x(".flights-toggle","#return-date-wrapper")})),console.log("Public JS loaded")})();